<!doctype html>
<html lang=en> 
<head>
<meta charset=utf-8> 
<title>qfaR: tools for Quantitative Fitness Analysis of microbial cultures</title> 
<meta name="desciption" content="Installing and using an R package for Quantitive Fitness Analysis (QFA) of arrayed microbial cultures growing on solid agar.">
<link href='http://fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,600italic,700italic,800italic,400,300,600,700,800' rel='stylesheet' type='text/css'>
<link rel="stylesheet" type="text/css" href="CLstyle.css">
</head> 

<body>
 
<header>
<a href="http://www.flickr.com/photos/conchur/8187964744/" title="FourCulturesCropped by Conor Lawless, on Flickr">
<img src="http://farm9.staticflickr.com/8489/8187964744_583f1264b2_m.jpg" width="15%" alt="FourCulturesCropped" style="display: inline; float:left; margin-right: 5px; margin-bottom: 30px;"></a>
<h1>qfaR: tools for Quantitative Fitness Analysis</h1> 
<hr></hr>
</header>

<nav id="nav">
<h4>Contents</h4>
<ul>
	<li><a href="#intro">Introduction</a></li>
	<li><a href="#install">Installation</a>
		<ul>
			<li><a href="#windows">Windows</a></li>
			<li><a href="#osx">OSX</a></li>
			<li><a href="#linux">Linux</a></li>
			<li><a href="#other">Other</a></li>
		</ul></li>
	<li><a href="#loading">Loading & using</a></li>
	<li><a href="#functions">Functions overview</a>
		<ul>
			<li><a href="#reading">Reading data</a></li>
			<li><a href="#inferring">Fitting growth model</a></li>
			<li><a href="#interaction">Inferring interactions</a></li>
			<li><a href="#auxiliary">Auxiliary functions</a></li>
		</ul></li>
</ul>
<h4>Other software</h4>
<ul>
	<li><a href="http://research.ncl.ac.uk/colonyzer">Colonyzer</a></li>
	<li><a href="http://bioinf1.ncl.ac.uk/qfa">QFAViz</a></li>
</ul>

<h4>References</h4>
<ul>
<li><a href="http://www.plosgenetics.org/doi/pgen.1001362">Addinall et al., 2011</a></li>
<li><a href="http://dx.doi.org/10.3791/4018">Banks et al., 2012</a></li>
<li><a href="http://dx.doi.org/10.1186/1471-2105-11-287">Lawless et al., 2010</a></li>
<li><a href="http://research.ncl.ac.uk/qfa">QFA website</a></li>
</ul>

<h4>Authors</h4>
<ul>
<li><a href="http://www.staff.ncl.ac.uk/conor.lawless/">Conor Lawless</a></li>
<li>Jonathan Heydari</li>
<li>Alexander Young</li>
<li><a href="http://www.staff.ncl.ac.uk/d.j.wilkinson/">Darren Wilkinson</a></li>
</ul>

</nav>

<article id="main">
<a name="intro"><h2>Introduction</h2></a>
<p>This page describes how to install and use an <a href="http://cran.r-project.org/">R</a> package for carrying out quantitative fitness analysis (<a href="http://research.ncl.ac.uk/qfa">QFA</a>) of the growth of microbial cultures arrayed on a solid agar surface.  A more detailed description of QFA and the motivation for carrying out these experiments and subsequent analysis can be found on the <a href="http://research.ncl.ac.uk/qfa">QFA website</a>.</p>

<p>Instructions for users specifically interested in using the data visualisation tools in the package can be found on the <a href="visTool">visualisation tool webpages</a>.</p>

<hr></hr>

<a name="install"><h2>Installing or updating the QFA package</h2></a>

<a name="windows"><h3>Installing or updating under windows</h3></a>

<p>You will require administrator rights on your PC to install <a href="http://cran.r-project.org/bin/windows/base/">R</a> and the qfa package.

<ol>
<li>Make sure you have the latest version of R installed on your computer.  If not, <a href="http://cran.r-project.org/bin/windows/base/">download</a> the latest .exe file to your hard drive and install.</li>
<li>Install the qfa package containing the visualisation tool and the <a href="http://www.plosgenetics.org/doi/pgen.1001362">Addinall et al., 2011</a> QFA datasets:
	<ol type="a">
		<li>Start the R application (e.g. Start->All Programs->R->R x64 3.0.1)</li>
		<li>Paste the following line of code after the command line prompt (followed by Enter):</li>
		<code>
install.packages("qfa", repos="http://R-Forge.R-project.org")
		</code>
	</ol>
</li>
</ol>
</p>

<p>Installation should be complete.  You do not have to go through these steps again to use the tool.  To update an existing installation to the latest version, simply repeat step 2.</p>

<a name="osx"><h3>Installing or updating under OSX</h3></a>

<p>You will require administrator rights on your machine to install <a href="http://cran.r-project.org/bin/macosx/">R</a> & the QFA package.

<ol>
	<li>Make sure you have the latest version of R installed on your computer (or at least a version >= 3.0.1).  If not, <a href="http://cran.r-project.org/bin/macosx/">download</a> the latest R installation file (.pkg file) to your hard drive and install.</li>
	<li>Install the qfa package containing the visualisation tool and the <a href="http://www.plosgenetics.org/doi/pgen.1001362">Addinall et al., 2011</a> QFA datasets:
	<ol type="a">
		<li>If you already have a version installed, you can check the installed version number by pasting the following line of code after the command line prompt in an R session (followed by Enter):
		<br><code>
sessionInfo("qfa")
		</code>
		</li>
		<li>Save the latest version of the <a href="OSX/qfa_0.0-19.tar.gz">installer package</a> to your hard-drive, noting its location</li>
		<li>Start the R application</li>
		<li>Navigate to Packages & Data -> Package Installer</li>
		<li>Choose "Local Source Package" in the menu for Package Repository</li>
		<li>Select "Install at System Level"</li>
		<li>Click the "Install" button, supplying an admininstrator username and password if required</li>
		<li>Navigate to the installer package downloaded to hard-drive in step a), click ok</li>
		<li>Check if there are any queries in the main R window.  For example, if the current user is not an administrator you may be prompted with the following message:<pre>
Warning in install.packages(file.choose(), "/Library/Frameworks/R.framework/Resources/library/",  :
  'lib = "/Library/Frameworks/R.framework/Resources/library/"' is not writable
> 
Would you like to use a personal library instead?  (y/n) 	
		</pre>  In this case, you should move the cursor to the end of the last line, type "y" and press enter.</li>
		<li>Close the "R Package Installer" window</li>
</ol>
</ol>

Note that the first time that you install the QFA package, depending on the version of your operating system, you might be prompted to install the <a href="http://xquartz.macosforge.org">X11</a> software for OSX.  X11 is necessary for generating interactive plots, so please install it if prompted.  This may require restarting your machine.</p>

<p>Installation should be complete.  You do not have to go through these steps again to use the tool (and in particular you should not have to install X11 again).  To update an existing installation to the latest version, simply repeat step 2.</p>

<a name="linux"><h3>Installing or updating under Linux</h3></a>

<p>You will require administrator rights to install the latest version of <a href="http://cran.r-project.org/bin/windows/base/">R</a> and the qfa package.

<ol>
<li>Make sure you have the latest version of R installed on your computer.  For example, here are some <a href="http://cran.r-project.org/bin/linux/ubuntu/README">instructions for installation under Ubuntu</a></li>
<li>Install the qfa package containing the visualisation tool and the <a href="http://www.plosgenetics.org/doi/pgen.1001362">Addinall et al., 2011</a> QFA datasets:
	<ol type="a">
		<li>Start the R application (e.g. type "R" at the command line)</li>
		<li>Paste the following line of code after the command line prompt (followed by Enter):</li>
		<code>
install.packages("qfa", repos="http://R-Forge.R-project.org")
		</code>
	</ol>
</li>

</ol>
</p>

<p>Installation should be complete.  You do not have to go through these steps again to use the tool.  To update an existing installation to the latest version, simply repeat step 2.</p>

<a name="other"><h3>Other installation methods</h3></a>

<p>Package source code can be checked out from the <a href="http://r-forge.r-project.org/scm/?group_id=880">SVN repository</a> at the <a href="http://r-forge.r-project.org/projects/qfa">R-forge</a> website: <a href="http://r-forge.r-project.org/projects/qfa">http://r-forge.r-project.org/projects/qfa</a></p>

<p>Binary packages for MS Windows and Linux (but not OSX) can be found on the same page.</p>

<hr></hr>

<a name="loading"><h2>Loading & using the QFA package</h2></a>

<p>Once installed, the package must be loaded, to make it ready for use, with:
<code class="indent">library(qfa)</code>
Detailed documentation can be found in the <a href="docs/qfa-manual.pdf">online version of the package manual</a> or by executing:
<code class="indent">help(package="qfa")</code>
Documentation for specific functions can also be obtained using the usual <a href="http://cran.r-project.org/">R</a> mechanisms.  For example, help on the function <code>colonyzer.read</code> can be obtained with:
<code class="indent">?colonyzer.read</code></a>
A short document outlining QFA and the package functions can be accessed <a href="docs/qfa.pdf">online</a> or by executing:
<code class="indent">vignette("qfa")</code>
Some example code demonstrating analysis of a small subset of the <a href="http://research.ncl.ac.uk/colonyzer/AddinallQFA/">data</a> presented in <a href="http://www.plosgenetics.org/doi/pgen.1001362">Addinall et al., 2011</a> can be executed by:
<code class="indent">demo("telomereCap")</code>
Finally, we can launch a demo of the interactive <a href="visTool">visualisation tool</a> to browse fitnesses and compare between experiments:
<code class="indent">visToolDemo()</code>
</p>

<hr></hr> 

<a name="functions"><h2>R package functions overview</h2></a> 
 
<p>This R package consists of a set of functions, split into types below:</p>

<a name="reading"><h3>Reading and formatting data</h3></a>
<p>These functions read in image analysis output (e.g. from <a href="http://research.ncl.ac.uk/colonyzer">Colonyzer</a>), associate these cell density estimates with culture type (e.g. genotype) & plate treatments and calculate time since inoculation for each observation.  All of these data are bound together into a data.frame object, with rows representing unique observations of individual cultures.</p>

<a name="fitting"><h3>Fitting logistic model to growth curves</h3></a>
<p>These functions carry out parameter inference for a <a href="http://en.wikipedia.org/wiki/Generalised_logistic_function#Generalised_logistic_differential_equation">generalised logistic model</a> of the observed growth curves.  Inference is currently carried out by maximum likelihood (fast, only provides point estimates for parameter values), however we are currently developing a parallel package (qfaBayes) for Bayesian hierarchical inference which will provide distributed parameter estimates, making more efficient use of the available experimental observations.  Logistic model parameter values can be used to construct quantitative fitness definitions for subsequent analysis.</p>

<a name="interaction"><h3>Inferring genetic interaction strengths</h3></a>
<p><a href="http://www.plosgenetics.org/doi/pgen.1001362">Addinall et al., 2011</a> present statistical methods for inferring genetic interaction with telomere capping mutations.  The analysis was based on comparing observervations of double mutant fitnesses with predicted double mutant fitnesses given observed single deletion fitnesses and assuming a multiplicative model of genetic interaction.  Effectively, genome-wide observations are used to construct a linear predictor of query mutation fitness given control mutation fitness, and  any deviations from this prediction are evidence for genetic interaction.  Observations of multiple replicate cultures are typically made and these replicates can be summarised by mean or median fitness, and significance of deviations can correspondingly be estimated by Student's t-test or the Mann-Whitney test, corrected for multiple comparisons.  Analysis based on mean/t-test is generally prefrable to that using median/Mann-Whitney test, since the former has greater statistical power, however, in the case where it has not been possible to perform adequate quality control on the source data (e.g. there are occasional contaminants, or missing cultures, resulting in statistical outliers) the former may be preferable. 

<a name="auxiliary"><h3>Auxiliary functions</h3></a>
<p>Together with the functions for carrying out the raw analysis above, we provide several functions for visualising the data, the fit of the logistic model to the data and the visualisation of evidence for epistatic interaction.  These visualisation tools are important for understanding unexpected fitness patterns, tracking bugs and increasing user confidence in the validity of the sophisticated QFA workflows.</p>

<p>One such function, the qfaR visualisation tool, generates interactive scatterplots for browsing genome-wide fitness comparisons.  To use this tool, please see the documentation which can be found on the <a href="visTool">visualisation tool website</a>.</p>
</article>

</body> 
</html> 
